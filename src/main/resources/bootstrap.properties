spring.application.name=link-shortener-config-server

# --- VAULT INTEGRATION CONFIGURATION ---
# This section configures HOW to connect to Vault.
spring.cloud.vault.host=vault.vault.svc.cluster.local
spring.cloud.vault.port=8200
spring.cloud.vault.scheme=http
spring.cloud.vault.authentication=KUBERNETES
spring.cloud.vault.kubernetes.role=link-shortener-config-server-${spring.profiles.active}-role

# --- THIS IS THE FIRST CRUCIAL FIX ---
# This tells the KV engine where the secrets are mounted.
# For KV v2, this MUST be 'secret'.
spring.cloud.vault.kv.backend=secret

# --- THIS IS THE SECOND CRUCIAL FIX ---
# We explicitly disable the "helpful" default locators that were causing the 403 errors.
spring.cloud.vault.generic.enabled=false
spring.cloud.vault.kv.enabled=false

# --- DYNAMIC AND EXPLICIT VAULT IMPORT ---
# This is now the ONLY thing that will try to fetch secrets from Vault.
# It is dynamic and uses the correct KV v2 API path structure.
spring.config.import=vault://kv/data/${spring.profiles.active}/link-shortener-config-server/config
